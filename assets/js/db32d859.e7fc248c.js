"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[653],{3905:function(e,t,o){o.d(t,{Zo:function(){return c},kt:function(){return m}});var n=o(7294);function r(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function a(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?a(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function s(e,t){if(null==e)return{};var o,n,r=function(e,t){if(null==e)return{};var o,n,r={},a=Object.keys(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||(r[o]=e[o]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}var l=n.createContext({}),u=function(e){var t=n.useContext(l),o=t;return e&&(o="function"==typeof e?e(t):i(i({},t),e)),o},c=function(e){var t=u(e.components);return n.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},p=n.forwardRef((function(e,t){var o=e.components,r=e.mdxType,a=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=u(o),m=r,h=p["".concat(l,".").concat(m)]||p[m]||d[m]||a;return o?n.createElement(h,i(i({ref:t},c),{},{components:o})):n.createElement(h,i({ref:t},c))}));function m(e,t){var o=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=o.length,i=new Array(a);i[0]=p;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var u=2;u<a;u++)i[u]=o[u];return n.createElement.apply(null,i)}return n.createElement.apply(null,o)}p.displayName="MDXCreateElement"},2623:function(e,t,o){o.r(t),o.d(t,{assets:function(){return c},contentTitle:function(){return l},default:function(){return m},frontMatter:function(){return s},metadata:function(){return u},toc:function(){return d}});var n=o(7462),r=o(3366),a=(o(7294),o(3905)),i=["components"],s={sidebar_position:5,title:"Security Considerations"},l=void 0,u={unversionedId:"security",id:"security",title:"Security Considerations",description:"Why Windows does not have a sudo command?",source:"@site/docs/security.md",sourceDirName:".",slug:"/security",permalink:"/gsudo/docs/security",editUrl:"https://github.com/gerardog/gsudo/blob/docs/docs/docs/security.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5,title:"Security Considerations"},sidebar:"tutorialSidebar",previous:{title:"Credentials Cache",permalink:"/gsudo/docs/credentials-cache"}},c={},d=[{value:"Why Windows does not have a <code>sudo</code> command?",id:"why-windows-does-not-have-a-sudo-command",level:2},{value:"Is it safe to run gsudo?",id:"is-it-safe-to-run-gsudo",level:2}],p={toc:d};function m(e){var t=e.components,o=(0,r.Z)(e,i);return(0,a.kt)("wrapper",(0,n.Z)({},p,o,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"why-windows-does-not-have-a-sudo-command"},"Why Windows does not have a ",(0,a.kt)("inlineCode",{parentName:"h2"},"sudo")," command?"),(0,a.kt)("p",null,"To answer this question, we first have to take a look back at the history."),(0,a.kt)("p",null,"In August 2002, Chris Paget released a white paper describing a form of attack against event-driven systems that he termed Shatter Attack. It allowed processes in the same session to bypass security restrictions by abussing Windows Message loop."),(0,a.kt)("p",null,'Microsoft response was to add "User Interface Privilege Isolation" (UIPI) and the "User Access Control" (UAC) popup to the next mayor release: Windows Vista. Privileged processes would then ran "elevated", out of reach of lower non-admin processes.'),(0,a.kt)("p",null,"I assume that at this point Microsoft decided not to make a ",(0,a.kt)("inlineCode",{parentName:"p"},"sudo")," tool for windows. It would be an unwanted bridge between two intentionally (supposedly) isolated worlds.."),(0,a.kt)("p",null,"But, let me ",(0,a.kt)("a",{parentName:"p",href:"https://devblogs.microsoft.com/oldnewthing/20160816-00/?p=94105"},"quote Raymond Chen from Microsoft"),":"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"There\u2019s a setting that lets you specify how often you want to be prompted by UAC. You can set any of four levels:"),(0,a.kt)("ul",{parentName:"blockquote"},(0,a.kt)("li",{parentName:"ul"},"Always notify"),(0,a.kt)("li",{parentName:"ul"},"Notify only when apps try to change settings, use the secure desktop ",(0,a.kt)("inlineCode",{parentName:"li"},"(Default mode)")),(0,a.kt)("li",{parentName:"ul"},"Notify only when apps try to change settings, don\u2019t use the secure desktop"),(0,a.kt)("li",{parentName:"ul"},"Never notify")),(0,a.kt)("p",{parentName:"blockquote"},"Although it looks like there are four settings, in a theoretical sense, there really are only two settings."),(0,a.kt)("ul",{parentName:"blockquote"},(0,a.kt)("li",{parentName:"ul"},"Always notify"),(0,a.kt)("li",{parentName:"ul"},"Meh")),(0,a.kt)("p",{parentName:"blockquote"},"The reason why all the other options collapse into Meh is that the ",(0,a.kt)("inlineCode",{parentName:"p"},"Notify only when apps try to change settings")," option can be subverted by any app simply by (...)")),(0,a.kt)("p",null,'And, up to this day, Windows 10 & 11, defaults to "Meh". Why? User convenience (against security).'),(0,a.kt)("p",null,"Later, it was assumed publicily that ",(0,a.kt)("inlineCode",{parentName:"p"},"UIPI")," in default mode is not a security boundary. I will ",(0,a.kt)("a",{parentName:"p",href:"https://docs.microsoft.com/en-us/troubleshoot/windows-server/windows-security/disable-user-account-control#:~:text=More%20important%2C%20Same%2Ddesktop%20Elevation,be%20considered%20a%20convenience%20feature."},"quote Microsoft documentation")," :"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Same-desktop Elevation in UAC isn't a security boundary. It can be hijacked by unprivileged software that runs on the same desktop. Same-desktop Elevation should be considered a convenience feature.")),(0,a.kt)("p",null,"This literally means: ",(0,a.kt)("b",null,"UAC is a tool to protect you from shooting yourself in the foot. The only thing that protects you from malicious processes is your Anti Virus software"),"."),(0,a.kt)("p",null,"This contradicts the premises on which they decided not to create a Windows ",(0,a.kt)("inlineCode",{parentName:"p"},"sudo"),", because UAC is not really a complete isolation that ",(0,a.kt)("inlineCode",{parentName:"p"},"sudo")," will break. And if you want to avoid shooting yourself in the foot (running as admin something not intended to be admin), Window isolation is not always the best alternative, because:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"You loose important time by switching between elevated and unelevated windows, which leads to running non-admin stuff as admin to avoid context switching..."),(0,a.kt)("li",{parentName:"ul"},"... or even worse: you suffer from \"elevation fatigue\", which is, you tend to elevate everything 'just in case' one future command could require admin privileges.")),(0,a.kt)("p",null,"Therefore, in my opinion, it is fine to run a sudo tool for windows. A tool that allows you to cherry-pick which commands to elevate."),(0,a.kt)("h2",{id:"is-it-safe-to-run-gsudo"},"Is it safe to run gsudo?"),(0,a.kt)("p",null,"To answer this question, lets explore how gsudo could be used as an attack vector for escalation of privileges."))}m.isMDXComponent=!0}}]);