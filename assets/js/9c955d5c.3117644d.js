"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[183],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>h});var o=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=o.createContext({}),c=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},p=function(e){var t=c(e.components);return o.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=c(n),h=a,m=d["".concat(l,".").concat(h)]||d[h]||u[h]||i;return n?o.createElement(m,r(r({ref:t},p),{},{components:n})):o.createElement(m,r({ref:t},p))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,r=new Array(i);r[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:a,r[1]=s;for(var c=2;c<i;c++)r[c]=n[c];return o.createElement.apply(null,r)}return o.createElement.apply(null,n)}d.displayName="MDXCreateElement"},7973:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>c});var o=n(7462),a=(n(7294),n(3905));const i={sidebar_position:4,title:"Credentials Cache"},r=void 0,s={unversionedId:"credentials-cache",id:"credentials-cache",title:"Credentials Cache",description:"Introduction",source:"@site/docs/credentials-cache.md",sourceDirName:".",slug:"/credentials-cache",permalink:"/gsudo/docs/credentials-cache",draft:!1,editUrl:"https://github.com/gerardog/gsudo/blob/docs/docs/docs/credentials-cache.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4,title:"Credentials Cache"},sidebar:"tutorialSidebar",previous:{title:"Usage from Bash for Windows",permalink:"/gsudo/docs/usage/bash-for-windows"},next:{title:"Security Considerations",permalink:"/gsudo/docs/security"}},l={},c=[{value:"Introduction",id:"introduction",level:2},{value:"Cache Modes",id:"cache-modes",level:2},{value:"Usage",id:"usage",level:2}],p={toc:c};function u(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,o.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"introduction"},"Introduction"),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"Credentials Cache")," is an optional feature that allows to elevate several times from a parent process with only one UAC pop-up.  "),(0,a.kt)("p",null,"An active credentials cache session is just an elevated instance of gsudo that stays running and allows the invoker process to elevate again. No windows service or setup involved."),(0,a.kt)("p",null,"It is convenient, but it's safe only if you are not already hosting a malicious process: No matter how secure gsudo itself is, a malicious process could ",(0,a.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/DLL_injection#Approaches_on_Microsoft_Windows"},"trick")," the allowed process (Cmd/Powershell) and force a running ",(0,a.kt)("inlineCode",{parentName:"p"},"gsudo")," cache instance to elevate silently."),(0,a.kt)("h2",{id:"cache-modes"},"Cache Modes"),(0,a.kt)("p",null,"The cache mode can be set with ",(0,a.kt)("strong",{parentName:"p"},(0,a.kt)("inlineCode",{parentName:"strong"},"gsudo config CacheMode auto|explicit|disabled"))),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Explicit: (default)")," Every elevation shows a UAC popup, unless a cache session is started explicitly with ",(0,a.kt)("inlineCode",{parentName:"li"},"gsudo cache on"),".")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-powershell"},"gsudo config CacheMode Explicit # This is optional since Explicit is the default.\n\ngsudo command1 # 1st UAC Popup shown\ngsudo command2 # 2nd UAC Popup shown\ngsudo cache on # 3rd UAC Popup shown, cache session started\ngsudo command3 # Elevation without popup \ngsudo command4 # Elevation without popup \ngsudo cache off # (or gsudo -k) Ends the cache session. Next elevation will show a UAC popup.\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Auto:")," Simil-unix-sudo. The first elevation shows a UAC Popup and starts a cache session automatically.")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-powershell"},"gsudo config CacheMode Auto # Only need to run once, this setting is persistent.\n\ngsudo command1 # 1st UAC Popup shown, cache session started\ngsudo command2 # Elevation without popup\ngsudo command3 # Elevation without popup \ngsudo cache off # (or gsudo -k) Ends the cache session. Next elevation will show a UAC popup.\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Disabled:")," Every elevation request shows a UAC popup. Attempts to start a Cache Session throws error. ")),(0,a.kt)("p",null,"Use ",(0,a.kt)("inlineCode",{parentName:"p"},"gsudo cache on|off")," to start/stop a cache session manually (i.e. allow/disallow elevation of the current process with no additional UAC popups)."),(0,a.kt)("p",null,"Use ",(0,a.kt)("inlineCode",{parentName:"p"},"gsudo -k")," to terminate all cache sessions. (Use this before leaving your computer unattended to someone else.)"),(0,a.kt)("p",null,"The cache session ends automatically when the allowed process ends or if no elevations requests are received for 5 minutes (configurable via ",(0,a.kt)("inlineCode",{parentName:"p"},"gsudo config CacheDuration"),")."),(0,a.kt)("h2",{id:"usage"},"Usage"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"gsudo cache [-h]"),"              Shows cache help")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"gsudo cache {on | off} [-p {pid}] [-d {time}]"),"   Start/stop a gsudo cache session."),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"-p | --pid {pid}"),"            Specify which process can use the cache. (Use 0 for any, Default=",(0,a.kt)("inlineCode",{parentName:"li"},"caller pid"),")"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"-d | --duration {hh:mm:ss}"),"  Max time the cache can stay idle before closing.",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Use '-1' to keep open until logoff (or until ",(0,a.kt)("inlineCode",{parentName:"li"},"cache off"),", or ",(0,a.kt)("inlineCode",{parentName:"li"},"-k"),")."),(0,a.kt)("li",{parentName:"ul"},"The default is ",(0,a.kt)("inlineCode",{parentName:"li"},"CacheDuration")," is 5 minutes.")))))))}u.isMDXComponent=!0}}]);